# Maintainer: Cristian Falcone <cristianfalcone@gmail.com>
pkgname=bun-bootstrap
pkgver=1.3.6
pkgrel=0
pkgdesc="Bootstrap binary for building Bun from source"
url="https://bun.sh"
arch="x86_64 aarch64"
license="MIT"
# no test suite; binary is pre-stripped upstream
options="!check !strip"

source="
	bun-linux-x64-musl-$pkgver.zip::https://github.com/oven-sh/bun/releases/download/bun-v$pkgver/bun-linux-x64-musl.zip
	bun-linux-aarch64-musl-$pkgver.zip::https://github.com/oven-sh/bun/releases/download/bun-v$pkgver/bun-linux-aarch64-musl.zip
"

package() {
	case "$CARCH" in
		x86_64) _arch="x64-musl" ;;
		aarch64) _arch="aarch64-musl" ;;
	esac
	install -Dm755 "$srcdir/bun-linux-$_arch/bun" \
		"$pkgdir/usr/lib/bun-bootstrap/bun"
}

sha512sums="
eac8873a5dcb3d533d9c89fdfd0e6bd32a245c44cf97371a9fa2874e31842f338a292aadbd46f6acede33ef12cfe461c3e8870c0ebd87d26d767bb4b7e256bca  bun-linux-x64-musl-1.3.6.zip
b0d6998ca247bdac4d31cf472451e1963d6c3b20ce760385fbf2c22b6c926aeab97a8d24136beda47c80aecf8d74d7c2e4de4f34659cc7d0f80837f5ae1f0503  bun-linux-aarch64-musl-1.3.6.zip
"
